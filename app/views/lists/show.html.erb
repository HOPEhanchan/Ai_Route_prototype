<div class="min-h-[60vh] bg-slate-50">
  <div class="max-w-3xl mx-auto px-4 py-8 space-y-4">

    <!-- „Çø„Ç§„Éà„É´Ë°åÔºö„Çπ„Éû„ÉõÔºùÁ∏¶‰∏¶„Å≥ / PCÔºùÊ®™‰∏¶„Å≥ -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
      <div class="min-w-0">
        <p class="text-xs text-gray-500 mb-1">Ë°å„ÅçÂÖà„É™„Çπ„Éà</p>
        <h1 class="text-xl font-bold text-emerald-600 break-words">
          <span class="block max-w-[220px] truncate sm:max-w-none sm:whitespace-normal">
            <%= @list.name %>
          </span>
        </h1>
      </div>

      <!-- „Éú„Çø„É≥„Åü„Å°Ôºö„Çπ„Éû„Éõ„Åß„ÅØ‰∏ã„Å´Á∏¶‰∏¶„Å≥ -->
      <div class="flex flex-wrap gap-2 sm:justify-end">
        <%= link_to "+„Çπ„Éù„ÉÉ„ÉàËøΩÂä†",
                    new_spot_path(list_id: @list.id),
                    class: "px-3 py-1 rounded-lg bg-emerald-500 text-white
                            hover:bg-emerald-600
                            text-xs sm:text-sm transition" %>

        <%= link_to "„É™„Çπ„ÉàÂêçÂ§âÊõ¥",
                    edit_list_path(@list),
                    class: "px-3 py-1 rounded-lg bg-emerald-50 text-emerald-600
                            border border-emerald-200 hover:bg-emerald-100
                            text-xs sm:text-sm" %>

        <%= link_to "‰∏ÄË¶ß„Å´Êàª„Çã",
                    lists_path,
                    class: "px-3 py-1 rounded-lg border border-slate-300 bg-white
                            text-slate-700 hover:bg-slate-100 hover:text-slate-900
                            text-xs sm:text-sm transition" %>
      </div>
    </div>

    <% if @list.spots.any? %>
      <div class="space-y-3">
        <% @list.spots.each do |spot| %>
          <% list_item = @list.list_items.find { |li| li.spot_id == spot.id } %>

          <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4">
            <div class="space-y-2">
              <!-- ‰∏äÔºö„Çπ„Éù„ÉÉ„ÉàÊÉÖÂ†±Ôºà„Çø„Ç§„Éà„É´ & URLÔºâ -->
            <div>
                <h2 class="font-semibold text-gray-800 text-sm sm:text-base">
                  <span class="block max-w-[220px] truncate sm:max-w-none sm:whitespace-normal">
                    <%= truncate(spot.title.presence || "Ôºà„Çø„Ç§„Éà„É´Êú™ÂÖ•ÂäõÔºâ", length: 20) %>
                  </span>
                </h2>

                <% if spot.url.present? %>
                  <a href="<%= spot.url %>"
                     target="_blank" rel="noopener"
                     class="inline-flex items-center text-xs text-emerald-600 hover:text-emerald-700 break-all mt-1">
                    <%= spot.url %>
                  </a>
                <% end %>
              </div>

              <!-- ‰∏ãÔºö„Çµ„É†„Éç + „Éú„Çø„É≥ÔºàË©≥Á¥∞ / Â§ñ„ÅôÔºâ -->
              <div class="mt-2 flex items-center justify-between gap-3">
                <!-- Â∑¶Ôºö„Å°„Å£„Å°„ÇÉ„ÅÑ„Çµ„É†„ÉçÔºàÊ≠£ÊñπÂΩ¢Ôºâ -->
                <% if spot.image_url.present? %>
                  <div class="w-16 h-16 sm:w-20 sm:h-20 flex-shrink-0">
                    <%= image_tag spot.image_url,
                          class: "w-full h-full object-cover rounded-lg border border-slate-200" %>
                  </div>
                <% end %>

                <!-- Âè≥Ôºö„Éú„Çø„É≥Á∏¶‰∏¶„Å≥ -->
                <div class="flex flex-col items-end gap-1 text-[11px] sm:text-xs flex-shrink-0">
                  <!-- Ë©≥Á¥∞ -->
                  <%= link_to spot_path(spot, from: "list", list_id: @list.id),
                              class: "inline-flex items-center gap-1 px-3 py-1 rounded-lg
                                      border border-slate-200 bg-white text-gray-700
                                      hover:bg-slate-50 hover:border-emerald-200 hover:text-emerald-700
                                      transition" do %>
                    <span>Ë©≥Á¥∞</span>
                  <% end %>

                  <!-- Â§ñ„Åô -->
                  <% if list_item %>
                    <%= button_to list_list_item_path(@list, list_item),
                                  method: :delete,
                                  data: { turbo_confirm: "„Åì„ÅÆ„É™„Çπ„Éà„Åã„ÇâÂ§ñ„Åó„Åæ„Åô„ÅãÔºü" },
                                  class: "inline-flex items-center gap-1 px-3 py-1 rounded-lg
                                          border border-red-200 bg-red-50 text-red-700
                                          hover:bg-red-100 transition" do %>
                      <span>Â§ñ„Åô</span>
                    <% end %>
                  <% end %>
                </div>
              </div>
            </div>
          </div>

      <% end %>
      </div>
    <% else %>
      <div class="mt-6 rounded-xl border border-dashed border-slate-300 bg-white p-5 text-center">
        <p class="text-sm text-gray-600">
          „Åæ„Å†„Åì„ÅÆ„É™„Çπ„Éà„Å´„ÅØ<br>
          „Çπ„Éù„ÉÉ„Éà„ÅåËøΩÂä†„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ
        </p>
        <p class="mt-1 text-xs text-gray-500">
          „É°„Éã„É•„Éº„ÅÆ
          <%= link_to "üìç„Çπ„Éù„ÉÉ„Éà‰∏ÄË¶ß",
                      spots_path,
                      class: "text-emerald-600 underline decoration-emerald-300 hover:text-emerald-700" %>
          „Åã„Çâ„ÄÅ<br>
          „Åì„ÅÆ„É™„Çπ„Éà„Å´ËøΩÂä†„Åó„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇ
        </p>
      </div>
    <% end %>

  </div>
</div>
