<nav class="bg-white border-b border-gray-200">
  <div class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between">

    <!-- Â∑¶ÂÅ¥Ôºö„É≠„Ç¥Ôºà„Ç¢„Éó„É™„Çø„Ç§„Éà„É´„ÅÆ‰∏ã„Å´„Çø„Ç∞„É©„Ç§„É≥Ôºâ -->
    <div class="flex items-baseline gap-2 min-w-0">
      <%= link_to(
            (user_signed_in? ?lists_path : root_path),
            class: "flex flex-col sm:flex-row sm:items-baseline gap-0.5 sm:gap-2 min-w-0 no-underline"
          ) do %>
        <!-- „Ç¢„Éó„É™„Çø„Ç§„Éà„É´ -->
        <span class="text-lg sm:text-xl font-bold text-emerald-500 whitespace-nowrap">
          <%= t("header.title") %>
        </span>

        <!-- „Çø„Ç∞„É©„Ç§„É≥ÔºàPC„ÅÆ„ÅøË°®Á§∫Ôºâ -->
        <span class="hidden sm:block text-xs text-gray-500 mt-0.5">
          <%= t("header.tagline") %>
        </span>

      <% end %>
    </div>

    <% if user_signed_in? %>
      <div class="flex items-center gap-3">

        <!-- üíª PC / „Çø„Éñ„É¨„ÉÉ„ÉàÁî®„Éä„Éì -->
        <div class="hidden sm:flex items-center gap-3 text-xs sm:text-sm">

          <!-- „É™„Çπ„Éà üìù -->
          <%= link_to lists_path,
                      class: "px-2 py-1 bg-emerald-50 text-emerald-600
                              border border-emerald-200 rounded
                              hover:bg-emerald-100 font-medium whitespace-nowrap
                              flex items-center gap-1" do %>
            <span aria-hidden="true">üìù</span>
            <span><%= t("header.nav.lists") %></span>
          <% end %>

          <!-- „Çπ„Éù„ÉÉ„Éà üìç -->
          <%= link_to spots_path,
                      class: "px-2 py-1 bg-emerald-50 text-emerald-600
                              border border-emerald-200 rounded
                              hover:bg-emerald-50 font-medium whitespace-nowrap
                              flex items-center gap-1" do %>
            <span aria-hidden="true">üìç</span>
            <span><%= t("header.nav.spots") %></span>
          <% end %>

          <!-- „Ç¢„Éê„Çø„Éº Ôºã „É°„Éº„É´Ôºà„Éó„É≠„Éï„Ç£„Éº„É´ÁîªÈù¢„Å∏„ÅÆ„É™„É≥„ÇØÔºâüë§ -->
          <%= link_to profile_path,
                      class: "flex items-center gap-2 bg-gray-100 px-2 py-1 rounded
                              hover:bg-emerald-50 no-underline" do %>

            <% if current_user.avatar_url.present? %>
              <img src="<%= current_user.avatar_url %>"
                   alt="avatar"
                   class="w-6 h-6 rounded-full object-cover border border-slate-300" />
            <% else %>
              <div class="w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center text-xs text-white">
                <%= current_user.email.first.upcase %>
              </div>
            <% end %>

            <span class="text-gray-600 text-xs sm:text-sm max-w-[140px] truncate">
              <%= current_user.email %>
            </span>
          <% end %>

          <!-- „Ç¢„Éó„É™Ê¶ÇË¶Å„ÄÄüì± -->
          <%= link_to "AiRoute„Å´„Å§„ÅÑ„Å¶",
                      about_path,
                      class: "px-2 py-1 bg-white text-emerald-600
                              border border-emerald-200 rounded
                              hover:bg-emerald-50 font-medium whitespace-nowrap" %>

          <!-- „É≠„Ç∞„Ç¢„Ç¶„Éà -->
          <%= button_to t("header.nav.logout"),
                        destroy_user_session_path,
                        method: :delete,
                        data: { turbo_confirm: t("header.nav.logout_confirm") },
                        class: "px-3 py-1 rounded bg-red-50 text-red-600 border border-red-200
                                hover:bg-red-100 text-xs sm:text-sm whitespace-nowrap" %>
        </div>

        <!-- üì± „Çπ„Éû„ÉõÁî®„Éä„ÉìÔºà„Ç¢„Éê„Çø„ÉºÔºã„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥„É°„Éã„É•„ÉºÔºâ -->
        <div class="relative sm:hidden">
          <details class="group">
            <summary class="list-none flex items-center gap-1 cursor-pointer">
              <% if current_user.avatar_url.present? %>
                <img src="<%= current_user.avatar_url %>"
                     alt="avatar"
                     class="w-8 h-8 rounded-full object-cover border border-slate-300" />
              <% else %>
                <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-sm text-white">
                  <%= current_user.email.first.upcase %>
                </div>
              <% end %>

              <!-- „Äå„É°„Éã„É•„Éº ‚ñº„Äç„Åß„Çø„ÉÉ„ÉóË™òÂ∞é -->
              <span class="text-[11px] text-slate-500">
                „É°„Éã„É•„Éº
              </span>
              <span class="text-[10px] text-slate-400">
                ‚ñº
              </span>
            </summary>

            <!-- Èñã„ÅÑ„Åü„Å®„Åç„Å´Âá∫„Å¶„Åè„Çã„É°„Éã„É•„Éº -->
            <div class="absolute right-0 mt-2 w-44 bg-white/95 backdrop-blur
                        rounded-xl shadow-lg border border-emerald-100 py-2 z-30">

              <!-- „É©„Éô„É´ -->
              <p class="px-3 pb-1 text-[11px] font-semibold tracking-wide text-slate-400 uppercase">
                „É°„Éã„É•„Éº
              </p>

              <!-- „É™„Çπ„Éà üìù -->
              <%= link_to lists_path,
                          class: "block px-3 py-2 text-xs
                                  text-emerald-700 hover:bg-emerald-50 hover:text-emerald-800
                                  transition-colors" do %>
                <span class="inline-flex items-center gap-1">
                  <span aria-hidden="true">üìù</span>
                  <span>„É™„Çπ„Éà</span>
                </span>
              <% end %>

              <!-- „Çπ„Éù„ÉÉ„Éà üìç -->
              <%= link_to spots_path,
                          class: "block px-3 py-2 text-xs
                                  text-emerald-700 hover:bg-emerald-50 hover:text-emerald-800
                                  transition-colors" do %>
                <span class="inline-flex items-center gap-1">
                  <span aria-hidden="true">üìç</span>
                  <span>„Çπ„Éù„ÉÉ„Éà</span>
                </span>
              <% end %>

              <!-- „Éó„É≠„Éï„Ç£„Éº„É´ üë§ -->
              <%= link_to profile_path,
                          class: "block px-3 py-2 text-xs
                                  text-emerald-700 hover:bg-emerald-50 hover:text-emerald-800
                                  transition-colors" do %>
                <span class="inline-flex items-center gap-1">
                  <span aria-hidden="true">üë§</span>
                  <span>„Éó„É≠„Éï„Ç£„Éº„É´</span>
                </span>
              <% end %>

              <!-- „Ç¢„Éó„É™Ê¶ÇË¶Å„ÄÄüì± -->
              <%= link_to "AiRoute„Å®„ÅØÔºü",
                          about_path,
                          class: "block px-3 py-2 text-xs
                                  text-emerald-700 hover:bg-emerald-50 hover:text-emerald-800
                                  transition-colors" %>

              <!-- „É≠„Ç∞„Ç¢„Ç¶„Éà„ÄÄÂ∞ë„ÅóÂå∫Âàá„Çã -->
              <div class="mt-1 pt-1 border-t border-slate-100">
                <%= button_to "„É≠„Ç∞„Ç¢„Ç¶„Éà",
                              destroy_user_session_path,
                              method: :delete,
                              data: { turbo_confirm: t("header.nav.logout_confirm") },
                              class: "w-full text-left px-3 py-2 text-xs
                                      text-red-600 hover:bg-red-50
                                      transition-colors" %>
              </div>
            </div>
          </details>
        </div>

      </div>
    <% else %>
      <!-- Êú™„É≠„Ç∞„Ç§„É≥ÊôÇ -->
      <div class="flex items-center gap-3 text-xs sm:text-sm">
        <%= link_to t("header.nav.login"),
                    new_user_session_path,
                    class: "text-gray-700 hover:text-emerald-500" %>

        <%= link_to t("header.nav.signup"),
                    new_user_registration_path,
                    class: "px-3 py-1 rounded bg-emerald-500 text-white text-xs sm:text-sm hover:bg-emerald-600" %>
      </div>
    <% end %>
  </div>
</nav>
