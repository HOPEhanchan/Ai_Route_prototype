<nav class="bg-white border-b border-gray-200">
  <div class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between">

    <!-- 左側：ロゴ＋アプリ名 -->
    <div class="flex items-baseline gap-2 min-w-0">
      <span class="text-lg sm:text-xl font-bold text-emerald-500 whitespace-nowrap">
        <%= t("header.title") %>
      </span>

      <span class="hidden sm:inline text-xs text-gray-500">
        <%= t("header.tagline") %>
      </span>
    </div>

    <!-- 右側：リンク -->
    <div class="flex items-center gap-4 text-xs sm:text-sm flex-wrap sm:flex-nowrap">

      <% if user_signed_in? %>

        <!-- ナビ：行き先リスト -->
        <%= link_to t("header.nav.lists"),
                    lists_path,
                    class: "px-2 py-1 bg-emerald-50 text-emerald-600
                            border border-emerald-200 rounded
                            hover:bg-emerald-100 font-medium whitespace-nowrap" %>

        <!-- ナビ：スポット一覧 -->
        <%= link_to t("header.nav.spots"),
                    spots_path,
                    class: "px-2 py-1 bg-white text-emerald-600
                            border border-emerald-200 rounded
                            hover:bg-emerald-50 font-medium whitespace-nowrap" %>

        <!-- ユーザー情報（全体をプロフィールへのリンクに） -->
        <%= link_to profile_path, class: "flex items-center gap-2 bg-gray-100 px-2 py-1 rounded no-underline" do %>

          <!-- アバター（SP/PC 両方に表示） -->
          <% if current_user.avatar_url.present? %>
          <!-- 画像アイコン（avatar_url がある場合） -->
            <img src="<%= current_user.avatar_url %>"
                 alt="avatar"
                 class="w-6 h-6 rounded-full object-cover border border-slate-300" />
          <% else %>
            <!-- 初期アイコン（頭文字） -->
            <div class="w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center text-xs text-white">
              <%= current_user.email.first.upcase %>
            </div>
          <% end %>

          <!-- メールアドレス（PCのみ表示） -->
          <span class="hidden sm:inline text-gray-600 text-xs sm:text-sm max-w-[140px] truncate hover:text-emerald-600">
            <%= current_user.email %>
          </span>
        <% end %>

        <!-- ログアウトボタン -->
        <%= button_to t("header.nav.logout"),
                      destroy_user_session_path,
                      method: :delete,
                      data: { turbo_confirm: t("header.nav.logout_confirm") },
                      class: "px-3 py-1 rounded bg-red-50 text-red-600 border border-red-200
                              hover:bg-red-100 text-xs sm:text-sm whitespace-nowrap" %>

      <% else %>
        <!-- 未ログイン時 -->
        <%= link_to t("header.nav.login"),
                    new_user_session_path,
                    class: "text-gray-700 hover:text-emerald-500" %>

        <%= link_to t("header.nav.signup"),
                    new_user_registration_path,
                    class: "px-3 py-1 rounded bg-emerald-500 text-white text-xs sm:text-sm hover:bg-emerald-600" %>
      <% end %>
    </div>
  </div>
</nav>
